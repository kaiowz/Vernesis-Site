<%- include ("../partials/header.ejs") %>
<%- include ("../partials/ptnavbar.ejs") %>
<body class = "body">  
    <div class="container cb mt-2 mb-2">
  
      <h1 class="mt-4 mb-3">Admin
        <small>Editar Artigo</small>
      </h1>
  
      <ol class="breadcrumb bg-mb">
        <li class="breadcrumb-item">
          <a href="/pt" class="text-decoration-none">In√≠cio</a>
        </li>
        <li class="breadcrumb-item">
            <a href="/admin" class="text-decoration-none">Admin</a>
          </li>
        <li class="breadcrumb-item active">Editar Artigo</li>
      </ol>
      
      <form method="POST" action="/admin/article/update">
        <input type="hidden" class="form-control mb-2" name="id" value="<%= article._id %>">

        <label>Titulo:</label>
        <input type="text" class="form-control mb-2" name="title" value="<%= article.title %>">

        <label>Lingua:</label>
        <input type="text" class="form-control mb-2" name="lang" value="<%= article.lang%>">

        <label>Imagem:</label>
        <input type="text" class="form-control mb-2" name="link_img" value="<%= article.link_img%>">

        <label>Categoria:</label>
        <select class="form-control mb-2" name=category_id>
            <% categories.forEach(category => {%>
                <%if(category._id == article.category_id){%>
                    <option value="<%= category._id %>" selected> <%= category.title_pt %></option>
                <%}else{%>
                    <option value="<%= category._id %>"> <%= category.title_pt %></option>
                <%}%>
            <%})%>
        </select>

        <label>Texto:</label>
        <textarea type="text" class="form-control mb-2" name="body" id="tiny"></textarea><br>

        <button type="submit" class="btn btn-vernesis btn-block mb-4">Enviar</button>
      </form>
    </div>
    <!-- /.container -->

    <div id="content" style="display: none;">
        <%- article.body%>
    </div>
</body>

<%- include ("../partials/footer.ejs") %>

<script src="/tinymce/tinymce.min.js"></script>

<script>
    tinymce.init({
        language: "pt_BR",
        selector: "#tiny",
        plugins: ["advlist autolink link image lists preview hr searchplace wordcount fullscreen insertdatetime media save table paste emoticons"],
        init_instance_callback: ()=>{
            tinymce.get("tiny").setContent($("#content").html())
        }
    })
</script>
